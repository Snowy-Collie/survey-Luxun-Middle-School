<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课题研究调查问卷</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <img src="./logo.png" alt="ACS Studio Logo" id="logo">
        <h1>ACS Studio - Air Maple Studio</h1>
        <p>Bringing Air Canada to Life in Scratch!</p>
    </header>

    <nav>
        <ul>
            <li><a href="https://acsstudio.site/">Home</a></li>
            <li><a href="https://acsstudio.site/avp/">AVP</a></li>
            <li><a href="./en.html">English</a></li>
        </ul>
    </nav>

    <section>
    <p><strong>尊敬的参与者：</strong><br>
    您好！我们是来自鲁迅中学的一支研究小组，正在进行一项关于碳酸饮料对牙齿健康影响的研究。本问卷旨在了解公众对碳酸饮料可能危害的认知情况，您的回答对我们的研究非常重要。本问卷匿名填写，仅用于学术研究，请您放心作答。感谢您的支持！由于技术的原因，其他选项暂时无法使用，请谅解。</p>

    <form id="survey-form">
        <div class="question">
            <h2>一、基本信息（选择题）</h2>
            <label>1. 您的年龄：</label><br>
            <label><input type="radio" name="age" value="10岁以下"> 10岁以下</label><br>
            <label><input type="radio" name="age" value="10–20岁"> 10–20岁</label><br>
            <label><input type="radio" name="age" value="21–40岁"> 21–40岁</label><br>
            <label><input type="radio" name="age" value="41–60岁"> 41–60岁</label><br>
            <label><input type="radio" name="age" value="60岁以上"> 60岁以上</label><br>

            <label>2. 您的性别：</label><br>
            <label><input type="radio" name="gender" value="男"> 男</label><br>
            <label><input type="radio" name="gender" value="女"> 女</label><br>
            <label><input type="radio" name="gender" value="不愿透露"> 不愿透露</label><br>

            <label>3. 您的职业：</label><br>
            <label><input type="radio" name="job" value="学生"> 学生</label><br>
            <label><input type="radio" name="job" value="教师"> 教师</label><br>
            <label><input type="radio" name="job" value="医疗从业者"> 医疗从业者</label><br>
            <label><input type="radio" name="job" value="企业员工"> 企业员工</label><br>
            <label><input type="radio" name="job" value="自由职业者"> 自由职业者</label><br>
            <label><input type="radio" name="job" value="退休人员"> 退休人员</label><br>
            <label><input type="text" name="job_other" placeholder="其他"> </label><br>
        </div>

        <div class="question">
            <h2>二、饮用习惯（单选/多选题）</h2>
            <label>4. 您多久饮用一次碳酸饮料？</label><br>
            <label><input type="radio" name="frequency" value="每天"> 每天</label><br>
            <label><input type="radio" name="frequency" value="每周几次"> 每周几次</label><br>
            <label><input type="radio" name="frequency" value="每月几次"> 每月几次</label><br>
            <label><input type="radio" name="frequency" value="几乎不喝"> 几乎不喝</label><br>

            <label>5. 您通常饮用的碳酸饮料品牌是？（可多选）</label><br>
            <label><input type="checkbox" name="brand" value="可口可乐"> 可口可乐</label><br>
            <label><input type="checkbox" name="brand" value="百事可乐"> 百事可乐</label><br>
            <label><input type="checkbox" name="brand" value="雪碧"> 雪碧</label><br>
            <label><input type="checkbox" name="brand" value="芬达"> 芬达</label><br>
            <label><input type="text" name="brand_other" placeholder="其他"> </label><br>

            <label>6. 您喝碳酸饮料时是否有以下习惯？（可多选）</label><br>
            <label><input type="checkbox" name="habit" value="饮用后立即漱口"> 饮用后立即漱口</label><br>
            <label><input type="checkbox" name="habit" value="饮用后刷牙"> 饮用后刷牙</label><br>
            <label><input type="checkbox" name="habit" value="直接饮用，不做其他处理"> 直接饮用，不做其他处理</label><br>
            <label><input type="text" name="habit_other" placeholder="其他"> </label><br>
        </div>

        <div class="question">
            <h2>三、健康认知（选择题）</h2>
            <label>7. 您认为长期饮用碳酸饮料可能对牙齿造成哪些影响？（可多选）</label><br>
            <label><input type="checkbox" name="impact" value="牙釉质腐蚀"> 牙釉质腐蚀</label><br>
            <label><input type="checkbox" name="impact" value="牙齿变色"> 牙齿变色</label><br>
            <label><input type="checkbox" name="impact" value="龋齿"> 龋齿</label><br>
            <label><input type="checkbox" name="impact" value="无明显影响"> 无明显影响</label><br>
            <label><input type="checkbox" name="impact" value="不清楚"> 不清楚</label><br>

            <label>8. 您对碳酸饮料的酸性是否了解？</label><br>
            <label><input type="radio" name="acidity" value="非常了解"> 非常了解</label><br>
            <label><input type="radio" name="acidity" value="略有了解"> 略有了解</label><br>
            <label><input type="radio" name="acidity" value="不清楚"> 不清楚</label><br>

            <label>9. 您认为减少碳酸饮料的摄入是否有助于保护牙齿健康？</label><br>
            <label><input type="radio" name="reduce" value="是"> 是</label><br>
            <label><input type="radio" name="reduce" value="否"> 否</label><br>
            <label><input type="radio" name="reduce" value="不确定"> 不确定</label><br>
        </div>

        <div class="question">
            <h2>四、公众态度（问答题）</h2>
            <label>10. 您认为有哪些有效的方法可以减少碳酸饮料对牙齿的危害？</label><br>
            <textarea name="methods" rows="4" cols="50"></textarea><br>

            <label>11. 您是否愿意了解更多关于碳酸饮料对健康影响的科学知识？</label><br>
            <label><input type="radio" name="learn" value="是"> 是</label><br>
            <label><input type="radio" name="learn" value="否"> 否</label><br>
        </div>

        <div class="question">
            <h2>五、调查者意见（问答题）</h2>
            <label>12. 您对碳酸饮料是否有其他看法或建议？</label><br>
            <textarea name="suggestions" rows="4" cols="50"></textarea><br>
        </div>

        <button class="button" onclick="submitSurvey()">提交问卷</button>
    </form>
</section>

    <footer>
        <p>© 2024 ACS Studio - Air Maple Studio. All rights reserved.</p>
    </footer>

    <script>
        document.getElementById('survey-form').addEventListener('submit', function(event) {
        event.preventDefault();
            // 获取所有必填问题的答案
        const age = document.querySelector('input[name="age"]:checked');
        const gender = document.querySelector('input[name="gender"]:checked');
        const job = document.querySelector('input[name="job"]:checked');
        const jobOther = document.querySelector('input[name="job_other"]').value.trim();
        const frequency = document.querySelector('input[name="frequency"]:checked');
        const brands = document.querySelectorAll('input[name="brand"]:checked');
        const habits = document.querySelectorAll('input[name="habit"]:checked');
        const impact = document.querySelectorAll('input[name="impact"]:checked');
        const acidity = document.querySelector('input[name="acidity"]:checked');
        const reduce = document.querySelector('input[name="reduce"]:checked');
        const methods = document.querySelector('textarea[name="methods"]').value.trim();
        const learn = document.querySelector('input[name="learn"]:checked');
        const suggestions = document.querySelector('textarea[name="suggestions"]').value.trim();

        // 验证基本问题是否填写完整
        if (!age || !gender || (!job && !jobOther)) {
            alert('请完整填写您的基本信息！');
            return;
        }

        if (!frequency) {
            alert('请回答您的饮用频率！');
            return;
        }

        if (brands.length === 0) {
            alert('请选择您饮用的碳酸饮料品牌！');
            return;
        }

        if (habits.length === 0) {
            alert('请选择饮用习惯！');
            return;
        }

        if (impact.length === 0) {
            alert('请选择长期饮用的影响！');
            return;
        }

        if (!acidity) {
            alert('请选择您对酸性的了解情况！');
            return;
        }

        if (!reduce) {
            alert('请选择您对减少摄入的态度！');
            return;
        }

        if (!learn) {
            alert('请选择是否愿意了解更多相关知识！');
            return;
        }

        // 收集数据
        const selectedBrands = Array.from(brands).map(brand => brand.value);
        const selectedHabits = Array.from(habits).map(habit => habit.value);
        const selectedImpact = Array.from(impact).map(i => i.value);

        const data = {
            age: age.value,
            gender: gender.value,
            job: job ? job.value : jobOther,
            frequency: frequency.value,
            brands: selectedBrands,
            habits: selectedHabits,
            impact: selectedImpact,
            acidity: acidity.value,
            reduce: reduce.value,
            methods: methods,
            learn: learn.value,
            suggestions: suggestions
        };

        // 提交数据
        fetch('https://response.acsstudio.site/submit_survey', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('问卷提交失败');
        }
        return response.json();
    })
    .then(result => {
        alert(result.message);
        window.location.href = 'finished.html'; // 跳转到完成页面
    })
    .catch(error => {
        console.error('提交错误:', error);
        alert('提交失败，请稍后再试！');
    });
    });
</script>

</body>
</html>
